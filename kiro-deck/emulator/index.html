<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Kiro Deck</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="container">
    <div class="header">
      <h1>Kiro Deck</h1>
      <div class="header-controls">
        <select id="device-select"></select>
        <button id="settings-btn" class="edit-btn">⚙ Settings</button>
      </div>
    </div>
    
    <!-- Mode Switch Dialog -->
    <div id="mode-dialog" class="modal" style="display:none">
      <div class="modal-content">
        <div id="mode-dialog-content"></div>
        <div class="modal-actions">
          <button id="mode-cancel" class="cancel-btn">Cancel</button>
          <button id="mode-confirm" class="save-btn">Switch Mode</button>
        </div>
      </div>
    </div>
    
    <!-- Settings Panel -->
    <div id="settings-panel" class="settings-panel" style="display:none">
      <div class="settings-header">
        <h2>Settings</h2>
        <button id="settings-close" class="close-btn">×</button>
      </div>
      <form id="settings-form">
        <div class="setting-group">
          <label>Mode</label>
          <select name="mode">
            <option value="standalone">Standalone (direct USB control)</option>
            <option value="btt">BetterTouchTool (export triggers)</option>
            <option value="elgato">Elgato Software (export profile)</option>
          </select>
        </div>
        <div class="setting-group">
          <label>Device Type</label>
          <select name="deviceType">
            <option value="neo">Stream Deck Neo</option>
            <option value="mini">Stream Deck Mini</option>
          </select>
        </div>
        <div class="setting-group">
          <label>Terminal App</label>
          <select name="terminalApp">
            <option value="auto">Auto-detect</option>
            <option value="iTerm">iTerm2</option>
            <option value="Terminal">Terminal.app</option>
            <option value="Warp">Warp</option>
            <option value="WezTerm">WezTerm</option>
          </select>
        </div>
        <div class="setting-group">
          <label>Favorite Agents (comma-separated)</label>
          <input type="text" name="favoriteAgents" placeholder="default, jupyter, git, notes">
        </div>
        <div class="setting-group">
          <label>Accent Color</label>
          <input type="color" name="accentColor" value="#9046ff">
        </div>
        <div class="setting-group">
          <label class="checkbox-label">
            <input type="checkbox" name="launchAtLogin"> Launch at login
          </label>
        </div>
        <div class="setting-actions">
          <button type="submit" class="save-btn">Save</button>
          <button type="button" id="export-btn" class="export-btn">Export Config</button>
        </div>
      </form>
    </div>
    
    <!-- Neo Layout: 2x4 + page buttons + info bar -->
    <div id="neo-layout" class="stream-deck">
      <button class="page-btn" id="page-left">&lt;</button>
      <div class="button-grid neo-grid">
        <div class="btn-wrapper"><button class="deck-btn" data-index="0"><img id="btn-0"></button><span class="btn-action" id="action-0">kiro.focus</span></div>
        <div class="btn-wrapper"><button class="deck-btn" data-index="1"><img id="btn-1"></button><span class="btn-action" id="action-1">kiro.cycle</span></div>
        <div class="btn-wrapper"><button class="deck-btn" data-index="2"><img id="btn-2"></button><span class="btn-action" id="action-2">kiro.alert</span></div>
        <div class="btn-wrapper"><button class="deck-btn" data-index="3"><img id="btn-3"></button><span class="btn-action" id="action-3">kiro.launch</span></div>
        <div class="btn-wrapper"><button class="deck-btn" data-index="4"><img id="btn-4"></button><span class="btn-action" id="action-4">kiro.yes</span></div>
        <div class="btn-wrapper"><button class="deck-btn" data-index="5"><img id="btn-5"></button><span class="btn-action" id="action-5">kiro.no</span></div>
        <div class="btn-wrapper"><button class="deck-btn" data-index="6"><img id="btn-6"></button><span class="btn-action" id="action-6">kiro.thinking</span></div>
        <div class="btn-wrapper"><button class="deck-btn" data-index="7"><img id="btn-7"></button><span class="btn-action" id="action-7">kiro.agent</span></div>
      </div>
      <button class="page-btn" id="page-right">&gt;</button>
    </div>
    
    <!-- Mini Layout: 2x3 -->
    <div id="mini-layout" class="stream-deck" style="display:none">
      <div class="button-grid mini-grid">
        <div class="btn-wrapper"><button class="deck-btn" data-index="4"><img id="mini-btn-4"></button><span class="btn-action">kiro.yes</span></div>
        <div class="btn-wrapper"><button class="deck-btn" data-index="5"><img id="mini-btn-5"></button><span class="btn-action">kiro.no</span></div>
        <div class="btn-wrapper"><button class="deck-btn" data-index="6"><img id="mini-btn-6"></button><span class="btn-action">kiro.thinking</span></div>
        <div class="btn-wrapper"><button class="deck-btn" data-index="0"><img id="mini-btn-0"></button><span class="btn-action">kiro.focus</span></div>
        <div class="btn-wrapper"><button class="deck-btn" data-index="1"><img id="mini-btn-1"></button><span class="btn-action">kiro.cycle</span></div>
        <div class="btn-wrapper"><button class="deck-btn" data-index="3"><img id="mini-btn-3"></button><span class="btn-action">kiro.launch</span></div>
      </div>
    </div>
    
    <div class="info-bar" id="info-bar-container">
      <img id="info-bar-img">
    </div>
    
    <button id="status-btn" class="status-btn disconnected">Disconnected</button>
  </div>
  <script src="script.js"></script>
</body>
</html>
